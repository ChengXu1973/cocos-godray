System.register("chunks:///_virtual/apply-godray-pass-builder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./builtin-pipeline-pass-builder.ts"],(function(e){var a,r,i,n,t,l,o,s,d,p;return{setters:[function(e){a=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){t=e.cclegacy,l=e._decorator,o=e.Material,s=e.gfx,d=e.rendering},function(e){p=e.BuiltinPipelinePassBuilder}],execute:function(){var u,c,y,h,g,f;t._RF.push({},"1c1e2oolINAabJcqkZGsiOS","apply-godray-pass-builder",void 0);var m=l.ccclass,P=l.disallowMultiple,b=l.menu,A=l.property;e("ApplyGodrayPassBuilder",(u=m("ApplyGodrayPassBuilder"),c=b("Rendering/ApplyGodrayPassBuilder"),y=A(o),u(h=c(h=P((f=a((g=function(e){function a(){for(var a,r=arguments.length,t=new Array(r),l=0;l<r;l++)t[l]=arguments[l];return a=e.call.apply(e,[this].concat(t))||this,i(a,"material",f,n(a)),a}r(a,e);var t=a.prototype;return t.onEnable=function(){e.prototype.onEnable.call(this)},t.onDisable=function(){e.prototype.onDisable.call(this)},t.configCamera=function(e,a,r){r.applyGodray=this.enabled&&!!this.material,r.applyGodray&&(r.enableFullPipeline=!0,r.remainingPasses++)},t.setup=function(e,a,r,i,n,t){if(!r.applyGodray)return t;if(r.remainingPasses--,0===r.remainingPasses)return this._addApplyGodrayPasses(e,a,r,this.material,i,r.width,r.height,n.colorName,n.depthStencilName,r.colorName);var l=r.enableShadingScale?"ScaledRadiance":"Radiance",o=this.getPingPongRenderTarget(n.colorName,l,r.renderWindowId),s=n.colorName;return n.colorName=o,this._addApplyGodrayPasses(e,a,r,this.material,i,r.width,r.height,s,n.depthStencilName,o)},t._addApplyGodrayPasses=function(e,a,r,i,n,t,l,o,p,u){var c=e.addRenderPass(t,l,"apply-godray");return c.addRenderTarget(u,s.LoadOp.LOAD,s.StoreOp.STORE),c.addTexture(o,"inputTexture"),c.addQueue(d.QueueHint.OPAQUE).addCameraQuad(n,i,0),c},a}(p)).prototype,"material",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=g))||h)||h)||h));t._RF.pop()}}}));

System.register("chunks:///_virtual/builtin-pipeline-pass-builder.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,r,n,s,l,o,a;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,l=e._decorator,o=e.CCInteger,a=e.Component}],execute:function(){var u,p,c,g,d,f,h,b;s._RF.push({},"db533GzKclJ0r9srNqWerGi","builtin-pipeline-pass-builder",void 0);var _=l.ccclass,P=l.disallowMultiple,y=l.menu,O=l.property;e("BuiltinPipelinePassBuilder",(u=_("BuiltinPipelinePassBuilder"),p=y("Rendering/BuiltinPipelinePassBuilder"),c=O(o),g=O(o),u(d=p(d=P((h=i((f=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),l=0;l<t;l++)s[l]=arguments[l];return i=e.call.apply(e,[this].concat(s))||this,r(i,"configOrder",h,n(i)),r(i,"renderOrder",b,n(i)),i._settings=void 0,i}t(i,e);var s=i.prototype;return s.onEnable=function(){this._settings=this.getComponent("BuiltinPipelineSettings").getPipelineSettings(),Object.prototype.hasOwnProperty.call(this._settings,"_passes")||Object.defineProperty(this._settings,"_passes",{value:[],configurable:!1,enumerable:!1,writable:!0}),this._settings._passes.push(this)},s.onDisable=function(){var e=this._settings._passes,i=e.indexOf(this);e.splice(i,1)},s.getConfigOrder=function(){return this.configOrder},s.getRenderOrder=function(){return this.renderOrder},s.getPingPongRenderTarget=function(e,i,t){return e.startsWith(i)?""+i+(1-Number(e.charAt(i.length)))+"_"+t:i+"0_"+t},i}(a)).prototype,"configOrder",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=i(f.prototype,"renderOrder",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 150}}),d=f))||d)||d)||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/godray-pass-builder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./builtin-pipeline-pass-builder.ts"],(function(e){var a,r,i,n,t,o,l,s,d,u;return{setters:[function(e){a=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){t=e.cclegacy,o=e._decorator,l=e.Material,s=e.gfx,d=e.rendering},function(e){u=e.BuiltinPipelinePassBuilder}],execute:function(){var c,p,h,g,y,f;t._RF.push({},"70b214x/LFL268HcaR4nutD","godray-pass-builder",void 0);var m=o.ccclass,b=o.disallowMultiple,P=o.menu,R=o.property;e("GodrayPassBuilder",(c=m("GodrayPassBuilder"),p=P("Rendering/GodrayPassBuilder"),h=R(l),c(g=p(g=b((f=a((y=function(e){function a(){for(var a,r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return a=e.call.apply(e,[this].concat(t))||this,i(a,"material",f,n(a)),a}r(a,e);var t=a.prototype;return t.onEnable=function(){e.prototype.onEnable.call(this)},t.onDisable=function(){e.prototype.onDisable.call(this)},t.configCamera=function(e,a,r){r.enableGodray=this.enabled&&!!this.material,r.enableGodray&&(r.enableFullPipeline=!0,r.remainingPasses++)},t.setup=function(e,a,r,i,n,t){if(!r.enableGodray)return t;if(r.remainingPasses--,0===r.remainingPasses)return this._addGodrayPasses(e,a,r,this.material,i,r.width,r.height,n.colorName,n.depthStencilName,r.colorName);var o=r.enableShadingScale?"ScaledRadiance":"Radiance",l=this.getPingPongRenderTarget(n.colorName,o,r.renderWindowId),s=n.colorName;return n.colorName=l,this._addGodrayPasses(e,a,r,this.material,i,r.width,r.height,s,n.depthStencilName,l)},t._addGodrayPasses=function(e,a,r,i,n,t,o,l,u,c){var p=e.addRenderPass(t,o,"godray");return p.addRenderTarget(c,s.LoadOp.LOAD,s.StoreOp.STORE),p.addTexture(l,"depthTexture"),p.addQueue(d.QueueHint.OPAQUE).addCameraQuad(n,i,0),p},a}(u)).prototype,"material",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=y))||g)||g)||g));t._RF.pop()}}}));

System.register("chunks:///_virtual/license.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,o,t,c,i;return{setters:[function(e){n=e.inheritsLoose},function(e){o=e.cclegacy,t=e._decorator,c=e.RichText,i=e.Component}],execute:function(){var s;o._RF.push({},"768b52UE2tGXZSI2gIz/1AW","license",void 0);var r=t.ccclass;e("License",r("License")(s=function(e){function o(){return e.apply(this,arguments)||this}n(o,e);var t=o.prototype;return t.onLoad=function(){this.getComponent(c).string='<on click="jumpModel"><b>"Forest House"</b></on> by peachyroyalty is licensed under <on click="jumpLicense"><b>Creative Commons Attribution-NonCommercial</b></on>.'},t.jumpModel=function(){window.open("https://skfb.ly/6QSKT")},t.jumpLicense=function(){window.open("http://creativecommons.org/licenses/by-nc/4.0/")},o}(i))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./apply-godray-pass-builder.ts","./builtin-pipeline-pass-builder.ts","./godray-pass-builder.ts","./license.ts","./main.ts"],(function(){return{setters:[null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./godray-pass-builder.ts"],(function(e){var t,a,n,i,r,s,o,l,c,h,u,d,p,g,m,f,C,y,b,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,o=e.v2,l=e.v3,c=e.Node,h=e.CCFloat,u=e.Material,d=e.Camera,p=e.input,g=e.Input,m=e.screen,f=e.TransformBit,C=e.instantiate,y=e.Renderer,b=e.Component},function(e){_=e.GodrayPassBuilder}],execute:function(){var v,w,z,S,M,P,F,I,T,x,E,O,R,L,N;r._RF.push({},"406a92KNs5ElbR/uxaYlSKA","main",void 0);var U=s.ccclass,j=s.property,A=o(),B=o(),D=l();function H(e,t){var a;e.layer=t,null==(a=e.children)||a.forEach((function(e){return H(e,t)}))}e("Main",(v=U("Main"),w=j(c),z=j(h),S=j(u),M=j(d),P=j(d),F=j(d),v((x=t((T=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"scene",x,i(t)),n(t,"spinSpeed",E,i(t)),n(t,"depthMaterial",O,i(t)),n(t,"sceneCamera",R,i(t)),n(t,"godrayCamera",L,i(t)),n(t,"shadowCamera",N,i(t)),t._clone=void 0,t}a(t,e);var r=t.prototype;return r.onLoad=function(){p.on(g.EventType.TOUCH_MOVE,this._move,this),m.on("window-resize",this._resize,this)},r.onEnable=function(){var e=this;this._resize(),this._setScene(),this._setUniform(),this.scheduleOnce((function(){e.scene.hasChangedFlags|=f.POSITION}),0)},r.update=function(){this.godrayCamera.enabled=!!this.scene.hasChangedFlags,this.shadowCamera.enabled=!!this.scene.hasChangedFlags,this._clone.active=!!this.scene.hasChangedFlags,this.scene.hasChangedFlags&&(this._clone.setPosition(this.scene.position),this._clone.setRotation(this.scene.rotation),this._clone.setScale(this.scene.scale))},r._move=function(e){e.getPreviousLocation(A),e.getLocation(B);var t=B.x-A.x;D.set(this.scene.eulerAngles),D.y+=this.spinSpeed*t,this.scene.setRotationFromEuler(D)},r._resize=function(){var e,t=m.windowSize,a=t.width,n=t.height;null==(e=this.godrayCamera.targetTexture)||e.resize(a,n),this.scene.hasChangedFlags|=f.POSITION},r._setScene=function(){var e,t=this;this._clone=C(this.scene),H(this._clone,1),this.scene.parent.addChild(this._clone),null==(e=this._clone.getComponentsInChildren(y))||e.forEach((function(e){var a=e.getSharedMaterial(0).getProperty("mainTexture");e.setMaterialInstance(t.depthMaterial,0),e.getMaterialInstance(0).setProperty("mainTexture",a)}))},r._setUniform=function(){this.shadowCamera.camera.update(!0);var e=this.godrayCamera.getComponent(_).material.passes[0];e.setUniform(e.getHandle("shadow_matViewProj"),this.shadowCamera.camera.matViewProj)},t}(b)).prototype,"scene",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(T.prototype,"spinSpeed",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),O=t(T.prototype,"depthMaterial",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(T.prototype,"sceneCamera",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(T.prototype,"godrayCamera",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(T.prototype,"shadowCamera",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=T))||I));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});